<h1>Premature Optimization is EVIL!</h1>
<p><img alt="Premature Optimization" src="images/premature_optimization.png"/></p>
<p>The famous saying, a golden rule of programming is that premature optimization
is evil! And I had to learn it the hard way, I was attempting to develop a
genetic programming framework in C because C is a <em>FAST</em> language (see
<a href="http://github.com/chutsu/evolve">evolve</a>), and the development time took
horrendously long time because I had to deal with, well, pointers. It wasn't
until 2 months into implementing that I had enough, and converted everything to
Python. I literally only took 5 days to rewrite everything I had from C to
Python (see <a href="http://github.com/chutsu/playground">playground</a>).</p>
<p>On the other hand one cannot ignore the possibility of improving, as Donald
Knuth said:</p>
<blockquote>
<p>We should forget about small efficiencies, say about 97% of the time:
premature optimization is the root of all evil. Yet we should not pass up our
opportunities in that critical 3%.</p>
</blockquote>
<h2>Example:</h2>
<p>Lets consider a programming puzzle I came across lately:</p>
<blockquote>
<p>Sum all numbers within the range i = 1 ...  1000 inclusive. If that number
is a multiple of 3 or 5, double it and add it to the sum.</p>
</blockquote>
<p>Naturally one would write something similar to the following:</p>
<pre><code>def straight_forward_method(max):
    sum = 0
    for i in xrange(1, max + 1):
        if (i % 3) == 0:
            sum += i * 2
        elif (i % 5) == 0:
            sum += i * 2
        else:
            sum += i
    return sum
</code></pre>
<p>Which is fine if <code>max</code> is small. However if <code>max</code> becomes bigger it can become
a problem in systems that depend on this function. A cleverer function would be
the following.</p>
<pre><code>def clever_method(max):
    # get mutliples of 3 and 5
    multiples_3 = range(3, max + 1, 3)
    multiples_5 = range(5, max + 1, 5)

    # remove overlaps (e.g, 15, 30, 35)
    multiples = [multiples_3, multiples_5]
    multiples = set().union(*multiples)

    # sum the multiples of 3 and 5
    multiples_sum = sum(multiples)

    # sum of series from 1 to max
    series_sum = ((max * (max + 1)) / 2)

    # total is sum of series plus sum of multiples
    return series_sum + multiples_sum
</code></pre>
<p>The difference between the two are quite massive, running the following
benchmark:</p>
<pre><code>i = 100000000

# benchmark - straight forward method
start_time = time.time()
straight_forward_method(i)
end_time = time.time()
exe_time = end_time - start_time
print "Straight forward method took: {0} secs".format(round(exe_time, 2))

# benchmark - clever method
start_time = time.time()
clever_method(i)
end_time = time.time()
exe_time = end_time - start_time
print "Clever method took: {0} secs".format(round(exe_time, 2))

# output on a macbook pro gives:
# Straight forward method took: 15.24 secs
# Clever method took: 6.26 secs
</code></pre>
<p>But then again <code>max</code> in this case does have to be really really large.</p>
<section class="comments">
<div id="disqus_thread"></div>
<script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'chutsu'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="http://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>